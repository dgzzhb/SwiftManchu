<!DOCTYPE html>
<meta charset='utf-8'>
<link rel='stylesheet' type='text/css' href='style-1.1.15.css'>
<meta id='xcode-display' name='xcode-display' content='render'>
<section>
    <p>
        This time, our transaction fails because Emery has already been added to the database. The addition of Fiona has been rolled back, and we’ll need to get to the bottom of this discrepancy (or make some schematic changes to our database to allow for multiple managers per user).
    </p>
    <aside>
        <h4>Experiment</h4>
        <p>
            Transactions can’t be nested, but savepoints can! Try calling the <code>savepoint</code> function instead, which shares semantics with <code>transaction</code>, but can successfully run in layers.
        </p>
    </aside>
    <h3>Query Building</h3>
    <p>
        SQLite.swift provides a powerful, type-safe query builder. With only a small amount of boilerplate to map our columns to types, we can ensure the queries we build are valid upon compilation.
    </p>
</section>
